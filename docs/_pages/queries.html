---
layout: null
permalink: /queries/
---

<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>SPARQL queries (Oxigraph)</title>
</head>
<body>
  <h1>SPARQL demo (Oxigraph)</h1>
  <pre id="out">Loadingâ€¦</pre>

  <script type="module">
    import init, { Store } from "https://cdn.jsdelivr.net/npm/oxigraph@0.4.0/oxigraph_wasm.js";

    const out = document.getElementById('out');

    function show(obj) {
      out.textContent = typeof obj === 'string' ? obj : JSON.stringify(obj, null, 2);
    }

    try {
      await init();
      const store = new Store();

      // IMPORTANT: put these files somewhere public, e.g. /assets/ontologies/
      const [ttlOnto, ttlExample] = await Promise.all([
        fetch("/assets/data/ontogsn_lite.ttl").then(r => {
          if (!r.ok) throw new Error("Failed to fetch ontogsn_lite.ttl: " + r.status);
          return r.text();
        }),
        fetch("/assets/data/example_ac.ttl").then(r => {
          if (!r.ok) throw new Error("Failed to fetch example_ac.ttl: " + r.status);
          return r.text();
        }),
      ]);

      // Load into the default graph
      store.load(ttlOnto,    "text/turtle", "https://w3id.org/OntoGSN/ontology#");
      store.load(ttlExample, "text/turtle", "https://w3id.org/OntoGSN/cases/ACT-FAST-robust-llm#");

      const q = `
        PREFIX gsn:  <https://w3id.org/OntoGSN/ontology#>
        PREFIX case: <https://w3id.org/OntoGSN/cases/ACT-FAST-robust-llm#>
        SELECT ?s ?p ?o
        WHERE { ?s ?p ?o }
        LIMIT 20
      `;

      const res = store.query(q);
      const rows = [];
      for (const b of res) {
        rows.push(Object.fromEntries([...b].map(([k, v]) => [k, v.value])));
      }
      show(rows);
    } catch (e) {
      show("Error: " + e.message);
      console.error(e);
    }
  </script>
</body>
</html>
